swagger: '2.0'
info:
  version: 1.0.0
  title: HiPPER
host: '35.198.70.235:8090'
basePath: /
tags:
  - name: Customer Register
    description: create and manage customers signups
  - name: Customer Info
    description: create and manage customers signups
  - name: Tours Generator
    description: Create and get new tours
  - name: Customer Messages
    description: Get the customer messsages
  - name: Provider Register
    description: create and manage providers signups
  - name: Product
    description: create and manage Products
  - name: Provider Redeem
    description: Redeem the customer's tour
 
paths:
  /register/customer/email/login:
    post:
      tags:
        - Customer Register
      summary: Create new customer in the system
      description: ''
      operationId: login
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: email
          in: query
          description: The user email for login
          required: true
          type: string
        - name: password
          in: query
          description: The password for login in clear text
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /register/customer/email/check:
    post:
      tags:
        - Customer Register
      summary: Create new customer in the system
      description: ''
      operationId: emailCheck
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: email
          in: query
          description: The user email for login
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /register/customer/email/signup:
    post:
      tags:
        - Customer Register
      summary: Create new customer in the system
      description: ''
      operationId: emailSignup
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: email
          in: query
          description: The user email for login
          required: true
          type: string
        - name: username
          in: query
          description: The username for login
          required: true
          type: string
        - name: password
          in: query
          description: The password for login in clear text
          required: true
          type: string
        - name: cpassword
          in: query
          description: The password repeats for login in clear text
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /register/customer/facebook/token:
    post:
      tags:
        - Customer Register
      summary: Login or register using a facebook token
      description: 'Use scope=public_profile,email in the requset'
      operationId: loginFacebookToken
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: query
          description: The
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /register/customer/google/token:
    post:
      tags:
        - Customer Register
      summary: Login or register using a Google token
      description: 'Use scope=profile,email in the requset'
      operationId: loginGoogleToken
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: query
          description: The
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  '/secured/customer/{id}/buy/suggestedtour/{tour_code}':
    post:
      tags:
        - Customer Info
      summary: Assign the tour for the customer
      description: >-
        The customer is already registered in the system, use after the buying
        confirmation
      operationId: buySuggestedTourByCustomer
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          description: the database id of the customer
          required: true
          type: string
        - name: tour_code
          in: path
          description: The unieqe code of that tour
          required: true
          type: string
        - name: password
          in: query
          description: The password for login in clear text
          required: true
          type: string
        - name: cpassword
          in: query
          description: The password repeats for login in clear text
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
          
  /secured/customer/{id}/messages/system/{status}:
    get:
      tags:
        - Customer Messages
      summary: Get customer messages by status
      description: >-
        The customer is already registered in the system, use after the buying
        confirmation
      operationId: getCustomerMessages
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          description: the database id of the customer
          required: true
          type: string
        - name: status
          in: path
          description: The messages status
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /secured/customer/{id}/messages/system/answer/{message_id}:
    post:
      tags:
        - Customer Messages
      summary: Get customer messages by status
      description: >-
        Answer to cusromer message
      operationId: ansnwerMessage
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          description: the database id of the customer
          required: true
          type: string
        - name: message_id
          in: path
          description: The messages status
          required: true
          type: string
      responses:
        '405':
          description: Invalid input
  /register/provider/signup:
    post:
      tags:
        - Provider Register
      summary: Signup new provider
      description: Create new provider in the system
      operationId: signupProvider
      produces:
        - application/json
      parameters: []
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            additionalProperties:
              type: string
              format: string
  /register/provider/login:
    post:
      tags:
        - Provider Register
      summary: Login existing provider
      description: Return authentication for the provider
      operationId: loginProvider
      produces:
        - application/json
      parameters: []
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            additionalProperties:
              type: string
              format: string
  /tours/generator:
    post:
      tags:
        - Tours Generator
      summary: Generate tours by demand
      description: Generate tours by demand
      produces:
        - application/json
      parameters:
        - name: userID
          in: query
          description: The user id
          required: false
          type: string
        - name: location
          in: query
          description: GEO location for the request  34.123;23.22344
          required: true
          type: string
        - name: requestTime
          in: query
          description: Current time
          required: true
          type: number
        - in: "body"
          name: "body"
          description: "List of user object"
          required: true
          schema:
            type: "array"
            items:
              $ref: "#/definitions/tourRequest"
      responses:
        '200':
          description: successful operation
  '/tours/generator/list/{list_token}':
    get:
      tags:
        - Tours Generator
      summary: Get the generated list for the request
      description: Get the generated list for the request
      produces:
        - application/json
      parameters:
        - name: list_token
          in: path
          description: The token recieved when generate requested
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            additionalProperties:
              type: integer
              format: int32
  '/secured/provider/{providerId}/product':
    get:
      tags:
        - Product
      summary: Get provider products
      description: get all the products for the provider
      operationId: findAllByProviderId
      produces:
        - application/json
      parameters:
        - name: providerId
          in: path
          description: The id of the provider
          required: true
          type: string
      responses:
        default:
          description: successful operation
    post:
      tags:
        - Product
      summary: Create new provider product
      description: Add new product for the provider
      operationId: createProduct
      produces:
        - application/json
      parameters:
        - name: providerId
          in: path
          description: The id of the provider
          required: true
          type: string
        - name: productName
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: productType
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: price
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: description
          in: query
          description: The id of the provider
          required: true
          type: string
      responses:
        default:
          description: successful operation
  '/secured/provider/{providerId}/product/{product_id}':
    put:
      tags:
        - Product
      summary: Change product
      description: Change product for the provider
      operationId: updateProduct
      produces:
        - application/json
      parameters:
        - name: providerId
          in: path
          description: The id of the provider
          required: true
          type: string
        - name: productName
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: productType
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: price
          in: query
          description: The id of the provider
          required: true
          type: string
        - name: description
          in: query
          description: The id of the provider
          required: true
          type: string
      responses:
        default:
          description: successful operation
    delete:
      tags:
        - Product
      summary: Delete provider product
      description: Delete one product for the provider
      operationId: deleteProduct
      produces:
        - application/json
      parameters:
        - name: providerId
          in: path
          description: The id of the provider
          required: true
          type: string
        - name: product_id
          in: path
          description: The id of the product to delete
          required: true
          type: string
      responses:
        default:
          description: successful operation
  '/secured/provider/{providerId}/redeem':
    post:
      tags:
        - Provider Redeem
      summary: Use the tour code to redeem the tour 
      description: Set the customer tour as used for that provider
      operationId: redeemTour
      produces:
        - application/json
      parameters:
        - name: providerId
          in: path
          description: The id of the provider
          required: true
          type: string
        - name: code
          in: query
          description: Active tour code
          required: true
          type: string
        - name: method
          in: query
          description: set 'scan' or 'manual'
          required: true
          type: string
      responses:
        default:
          description: successful operation
securityDefinitions:
  petstore_auth:
    type: oauth2
    authorizationUrl: 'http://petstore.swagger.io/oauth/dialog'
    flow: implicit
    scopes:
      'write:pets': modify pets in your account
      'read:pets': read your pets
  api_key:
    type: apiKey
    name: api_key
    in: header
definitions:
  customer:
    type: object
    properties:
      id:
        type: integer
        format: int64
      petId:
        type: integer
        format: int64
      quantity:
        type: integer
        format: int32
      shipDate:
        type: string
        format: date-time
      status:
        type: string
        description: Order Status
        enum:
          - placed
          - approved
          - delivered
      complete:
        type: boolean
        default: false
  tourRequest:
    type: object
    properties:
      userID:
        type: integer
        format: int64
      location:
        type: integer
        format: int64
      requestTime:
        type: integer
        format: int32
  error:
    type: object
    properties:
      id:
        type: integer
        format: int64
      name:
        type: string
    xml:
      name: Category
